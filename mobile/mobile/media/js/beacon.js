/*! beacon.js ver.42 */
(function(){var a=true;if(window.MAGNETO===undefined){MAGNETO={};a=false}MAGNETO.globals={win:window,doc:document,opener:opener,pageId:null,jsUrlRoot:"http://style.china.alibaba.com/sys/js/beacon/v1/",jsUrlHash:{flash:"plugins/client/flash.js",html5:"plugins/client/html5.js",spm:"plugins/spm/spm-min.js"},customize:window.WolfSmoke||{},protocol:document.location.protocol,isConflicted:a,version:"42"}})();(function(a){var b=a.globals,c=b.customize;a.config={samplerate:c.samplerate||1,siteNo:c.siteNo||2,logSeverOne:b.protocol+"//dmtracking.alibaba.com/b.jpg",logSeverTwo:b.protocol+"//dmtracking.alibaba.com/c.jpg",tracelogSever:b.protocol+"//stat.china.alibaba.com/tracelog/click.html",errorSever:b.protocol+"//stat.china.alibaba.com/dw/error.html",acookieSever:b.protocol+"//acookie.alibaba.com/1.gif",isSetCookieToAcookie:c.isSetCookieToAcookie||true,needDefaultCookies:["cna","ali_apache_id"],isCheckLogin:true}})(MAGNETO);
(function(j){var m=j.globals,b=j.config,f,i=window,l=i.document,e=!!l.attachEvent,g="attachEvent",d="addEventListener",h="detachEvent",c="removeEventListener",a=e?g:d,k=e?h:c;j.tools={is:function(n,o){return n!=null&&Object(n) instanceof o},isFunction:function(n){return(typeof n==="function")||Object.prototype.toString.apply(n)==="[object Function]"},isNumber:function(o){return typeof o==="number"&&isFinite(o)},isString:function(n){return typeof n==="string"},isArray:Array.isArray||function(n){return Object.prototype.toString.apply(n)==="[object Array]"},isEmptyObject:function(p){for(var n in p){return false}return true},spmMeta:function(){var r=document.getElementsByTagName("meta"),p=0,q,o=r.length,n;for(q=0;q<o;q++){n=r[q];if(this.tryToGetAttribute(n,"name")==="data-spm"){p=this.tryToGetAttribute(n,"content");break}}return p},trim:function(n){return this.isString(n)?n.replace(/^\s+|\s+$/g,""):""},tryToGetHref:function(o){var p=this;var n;try{n=this.trim(o.getAttribute("href",2))}catch(q){}return n||""},tryToGetAttribute:function(n,o){return n&&n.getAttribute?(n.getAttribute(o)||""):""},tryToSetAttribute:function(n,q,o){if(n&&n.setAttribute){try{n.setAttribute(q,o)}catch(p){}}},tryToRemoveAttribute:function(n,p){if(n&&n.removeAttribute){try{n.removeAttribute(p)}catch(o){tryToSetAttribute(n,p,"")}}},nodeListToArray:function(o){var n,r;try{n=[].slice.call(o);return n}catch(q){n=[];r=o.length;for(var p=0;p<r;p++){n.push(o[p])}return n}},combineJson:function(r,q,s){var o={};for(var p in q){if(s||!r.hasOwnProperty(p)){o[p]=q[p];delete r[p]}}for(var n in r){o[n]=r[n]}return o},combineParam:function(t,o,r,u){var n=[];for(var s in o){if(u||!t.hasOwnProperty(s)){n.push(s+"="+o[s]);delete t[s]}}for(var q in t){n.push(q+"="+t[q])}return n.join(r)},parseParam:function(q,u){var t,o=null,r={};if(this.isString(q)&&q.length>0){t=q.split(u);for(var p=0,n=t.length;p<n;++p){o=t[p].split("=");r[o[0]]=o[1]}}return r},on:function(p,n,o){p[a]((e?"on":"")+n,function(r){r=r||i.event;var q=r.target||r.srcElement;o(r,q)},false)},off:function(p,n,o){p[k]((e?"on":"")+n,function(r){r=r||i.event;var q=r.target||r.srcElement;o(r,q)},false)},random:function(){return Math.round(Math.random()*2147483647)},getReferrer:function(){var n,o=m.doc.referrer;try{n=o||m.opener.location.href||"-"}catch(p){n="-"}return n},sampling:function(){return(Math.random()-b.samplerate)<=0},trimHttpStr:function(n){return n.substr(n.indexOf("://")+2)},randomPageId:function(){var n=m.win.dmtrack_pageid||"",p=+new Date(),o="";n+=p;n=n.substr(0,20);while(n.length<42){n+=this.random()}o=n.substr(0,42);m.pageId=o;m.win.dmtrack_pageid=o;return o},sendErrorInfo:function(q,p){var n=b.errorSever,o=j.moduleManager.require("recorder"),r={type:p,exception:q.message};o.send(n,r)},emptyFunction:function(){}}})(MAGNETO);
(function(a){a.moduleManager=function(){var f=a.globals,e=f.doc,d=a.tools,c={},b=function(i){var h=f.jsUrlHash[i];return h?f.jsUrlRoot+h:null},g=function(){var h=function(j,k){var l,i=e.createElement("script");i.src=j;if(k){i.onload=i.onreadystatechange=function(){if(!this.readyState||"loaded"===i.readyState||"complete"===i.readyState){i.onload=i.onreadystatechange=null;k()}}}l=e.getElementsByTagName("script")[0];l.parentNode.insertBefore(i,l)};return{load:h}}();return{register:function(k,h,j){var i=this;if(i.hasRegistered(k)){return}c[k]=j?h.call(a):h},require:function(k,j){var i=c[k],h;if(d.isFunction(i)){return c[k]=i.call(a)}else{if(i){return i}}h=b(k);if(h!==null){g.load(h,function(){c[k]=c[k].call(a);(j||d.emptyFunction).call(null,c[k])})}return null},hasRegistered:function(h){return !!c[h]},hadUsed:function(i){var h=c[i];return h&&!d.isFunction(h)}}}()})(MAGNETO);
(function(a){a.taskManager=function(){var g=a.globals,f=g.win,e=function(k){try{var i=+new Date(),h=+new Date(k);return h-i>=0}catch(j){return false}},d=a.tools,b=a.moduleManager.require,c=function(l){var j=l.name,h=l.endTime,k=l.samplerate,i=l.config;if(h&&!e(h)){return}b(j,function(m){m.init(k,i)})};return{push:function(h){var i=[];if(!h){return}if(!d.isArray(h)){i.push(h)}else{i=h}d.on(f,"load",function(){for(var k=0,j=i.length;k<j;k++){c(i.pop())}})}}}()})(MAGNETO);
(function(a){a.moduleManager.register("recorder",function(){var g=this,e=g.globals,c=g.tools,f=function(k,l,m){var j=new Image(1,1);j.src=k+"?"+l;j.onload=function(){this.onload=null;(m||c.emptyFunction)()}},i=function(j,m,n){var k=e.win.XDomainRequest,l;if(k){l=new k;l.open("POST",j)}else{l=new XMLHttpRequest;if("withCredentials" in l){l.open("POST",j,true);l.setRequestHeader("Content-Type","text/plain")}}if(l){l.onreadystatechange=function(){if(l.readyState==4){n&&n();l=null}};l.send(m);return true}return false},b=function(){},d=function(q){var k="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",p,o,m,j=q.length,n=0,l="";while(n<j){p=q.charCodeAt(n++)&255;if(n==j){l+=k.charAt(p>>2);l+=k.charAt((p&3)<<4);l+="==";break}o=q.charCodeAt(n++);if(n==j){l+=k.charAt(p>>2);l+=k.charAt(((p&3)<<4)|((o&240)>>4));l+=k.charAt((o&15)<<2);l+="=";break}m=q.charCodeAt(n++);l+=k.charAt(p>>2);l+=k.charAt(((p&3)<<4)|((o&240)>>4));l+=k.charAt(((o&15)<<2)|((m&192)>>6));l+=k.charAt(m&63)}return l},h=function(m,j){var n="",k="",l=[];if(m&&!c.isEmptyObject(m)){n=d(c.combineParam(m,{},"&"))}j.ver=e.version;j.t=+new Date();k=c.combineParam(j,{},"&");if(n){l.push(n)}if(k){l.push(k)}return l.join("&")};return{sendEssentialInfo:function(k,l,j,o){var m=this,n=h(l,j);m.send(k,n,o)},send:function(k,m,n){var j=m.length;if(j<=2036){f(k,m,n)}else{if(j<=8192){f(k,"len="+j+"&"+m,n)}else{f(k,"err=len&len="+j+"&"+m,n)}}}}},true)})(MAGNETO);
(function(a){a.moduleManager.register("cookieProcessor",function(){var f=this,c=f.tools,e=f.globals,d=e.doc,h=function(n){var q=n.split(/;\s/g),l=null,o=null,k=null,p={};if(c.isString(n)&&n.length>0){for(var m=0,j=q.length;m<j;m++){k=q[m].match(/([^=]+)=/i);if(k instanceof Array){l=unescape(k[1]);o=unescape(q[m].substring(k[1].length+1))}else{l=unescape(q[m]);o=""}p[l]=o}}return p},b=function(j){var i=new Date;j=new Date(i.getTime()+j);return";expires="+j.toGMTString()},g=function(j,l,i,n,k,m){var o=escape(j)+"="+escape(l);if(i instanceof Date){o+="; expires="+i.toUTCString()}if(c.isNumber(i)&&i!==0){o+=b(i*24*60*60*1000)}if(c.isString(n)&&n!==""){o+="; path="+n}if(c.isString(k)&&k!==""){o+="; domain="+k}if(m===true){o+="; secure"}return o};return{get:function(i){if(!c.isString(i)||i===""){return null}var j=h(d.cookie);return i in j?j[i]:null},getSub:function(i,j){var k=this.getSubCookies(i);if(k){if(!c.isString(j)||j===""){return null}return j in k?k[j]:null}else{return null}},getSubCookies:function(i){var j=this.get(i),k;if(j){k=c.parseParam(j,"|");return k}else{return null}},set:function(j,k,i){i=i||{};if(c.isString(j)&&k!==undefined){var l=g(j,k,i.expires,i.path,i.domain,i.secure);d.cookie=l}},setSub:function(j,l,k,i){if(!c.isString(j)||j===""){return}if(!c.isString(l)||l===""){return}if(c.isUndefined(k)){return}var m=this.getSubCookies(j),n={};if(m===null){m={}}n[l]=k;this.set(j,c.combineParam(m,n,"|",true),i)},setSubs:function(j,l,i){if(!c.isString(j)||j===""){return}var k=this.getSubCookies(j)||{};this.set(j,c.combineParam(k,l,"|",true),i)},remove:function(j,i){i=i||{};var k=g(j,"",new Date(0),i.path,i.domain,i.secure);d.cookie=k},removeSub:function(i,j){if(!c.isString(i)||i===""){return}if(!c.isString(j)||j===""){return}var k=this.getSubCookies(i);if(k&&k.hasOwnProperty(j)){delete k[j];this.set(i,c.combineParam(k,{},"|"))}}}},true)})(MAGNETO);
(function(a){a.moduleManager.register("ua",function(){var k=this,q=k.globals,o={trident:0,webkit:0,gecko:0,presto:0,khtml:0,name:"other",ver:null},i={ie:0,firefox:0,chrome:0,safari:0,opera:0,konq:0,name:"other",ver:null},j={name:"",ver:null},c={win:false,mac:false,x11:false,name:"other"},d="other",e=q.win,p=e.navigator,b=p.userAgent,f=p.platform,h,l,g=function(r){var t=0;return parseFloat(r.replace(/\./g,function(){return(t++===0)?".":""}))};if(e.opera){o.ver=i.ver=g(e.opera.version());o.presto=i.opera=parseFloat(o.ver);o.name="presto";i.name="opera"}else{if(/AppleWebKit\/(\S+)/.test(b)){o.ver=g(RegExp["$1"]);o.webkit=o.ver;o.name="webkit";if(/Chrome\/(\S+)/.test(b)){i.ver=g(RegExp["$1"]);i.chrome=i.ver;i.name="chrome"}else{if(/Version\/(\S+)/.test(b)){i.ver=g(RegExp["$1"]);i.safari=i.ver;i.name="safari"}else{var n=1;if(o.webkit<100){n=1}else{if(o.webkit<312){n=1.2}else{if(o.webkit<412){n=1.3}else{n=2}}}i.safari=i.ver=n;i.name="safari"}}}else{if(/KHTML\/(\S+)/.test(b)||/Konqueror\/([^;]+)/.test(b)){o.ver=i.ver=g(RegExp["$1"]);o.khtml=i.konq=o.ver;o.name="khtml";i.name="konq"}else{if(/rv:([^\)]+)\) Gecko\/\d{8}/.test(b)){o.ver=g(RegExp["$1"]);o.gecko=o.ver;o.name="gecko";if(/Firefox\/(\S+)/.test(b)){i.ver=g(RegExp["$1"]);i.firefox=i.ver;i.name="firefox"}}else{if(/MSIE ([^;]+)/.test(b)){o.ver=i.ver=g(RegExp["$1"]);o.trident=i.ie=o.ver;o.name="trident";i.name="ie"}}}}}j.name=i.name;j.ver=i.ver;if(h=b.match(/360SE/)){j.name="se360";j.ver=3}else{if((h=b.match(/Maxthon/))&&(l=e.external)){j.name="maxthon";try{j.ver=g(l.max_version)}catch(m){j.ver=0.1}}else{if(h=b.match(/TencentTraveler\s([\d.]*)/)){j.name="tt";j.ver=g(h[1])||0.1}else{if(h=b.match(/TheWorld/)){j.name="theworld";j.ver=3}else{if(h=b.match(/SE\s([\d.]*)/)){j.name="sougou";j.ver=g(h[1])||0.1}}}}}c.win=f.indexOf("Win")==0;c.mac=f.indexOf("Mac")==0;c.x11=(f=="X11")||(f.indexOf("Linux")==0);if(c.win){if(/Win(?:dows )?([^do]{2})\s?(\d+\.\d+)?/.test(b)){if(RegExp["$1"]=="NT"){switch(RegExp["$2"]){case"5.1":c.win="XP";break;case"6.1":c.win="7";break;case"5.0":c.win="2000";break;case"6.0":c.win="Vista";break;default:c.win="NT";break}}else{if(RegExp["$1"]=="9x"){c.win="ME"}else{c.win=RegExp["$1"]}}}c.name="windows"+c.win}if(c.mac){c.name="mac"}if(c.x11){c.name="x11"}if(c.win=="CE"){d="windows mobile"}else{if(/ Mobile\//.test(b)){d="apple"}else{if((h=b.match(/NokiaN[^\/]*|Android \d\.\d|webOS\/\d\.\d/))){d=h[0].toLowerCase()}}}return{engine:o,browser:i,extraBrowser:j,system:c,mobile:d,resolution:e.screen.width+"*"+e.screen.height,language:p.language||p.browserLanguage}})})(MAGNETO);
(function(a){a.moduleManager.register("essential",function(){var k=this,q=a.globals,p=k.moduleManager,h=k.taskManager,f=k.tools,c=k.config,d=p.require("cookieProcessor"),g=p.require("recorder"),m=p.require("ua"),n=q.customize,i=function(){var s,t=d.get("__cn_logon__")==="true";return t},o=function(){var s=q.win.dmtrack_c;if(!s||s==="{-}"){return{}}s=s.substring(1,s.length-1).replace(/ali_resin_trace=/,"");return f.parseParam(s,"|")},e=function(){try{var u=f.getReferrer(),v=f.random(),s=n.acookieAdditional||{},t={cache:v,pre:u};g.sendEssentialInfo(c.acookieSever,{},f.combineJson(t,s))}catch(w){f.sendErrorInfo(w,"acookie")}},b=function(){var v=m.extraBrowser,s=v.name+v.ver.toFixed(1),t=m.system.name,u=s+"|"+t+"|"+m.resolution+"|"+m.language;return u},l=function(x){var v=n.needCookies,u=c.needDefaultCookies,s,t,w="-";if(f.isArray(u)&&v!=undefined){u=u.concat(v)}s=u.length;while(s--){t=u[s];w=d.get(t)||"-";x[t]=w}},j=function(){var s={name:"spm",endTime:null,samplerate:1,config:{}};h.push(s)},r=function(){if(!f.sampling()){return}try{var x=encodeURI(f.getReferrer()),v=d.getSubCookies("ali_apache_track")||{},u=c.logSeverOne,w=o(),t=d.getSubCookies("aliBeacon_bcookie")||{},s=encodeURI(q.doc.location.href);if(c.isSetCookieToAcookie){e()}l(v);if(c.isCheckLogin&&w.c_signed==undefined){w.c_signed=i()?1:0}f.combineJson(w,t,true);d.remove("aliBeacon_bcookie");g.sendEssentialInfo(u,{p:"{"+c.siteNo+"}",u:"{"+f.trimHttpStr(s)+"}",m:"{GET}",s:"{200}",r:"{"+x+"}",a:"{"+f.combineParam(v,{},"|")+"}",b:"{-}",c:"{"+f.combineParam(w,t,"|",true)+"}"},{pageid:f.randomPageId(),sys:b()});if(f.spmMeta()){j()}}catch(y){f.sendErrorInfo(y,"essential")}};return{init:r}},true)})(MAGNETO);
(function(b){var e=b.globals,d=e.doc,a=b.tools,g=b.config,h=b.moduleManager,c=h.require("recorder"),f=h.require("cookieProcessor");b.api={log:function(j,n){try{var m={},k={},i=j.split("?");if(i[1]!==undefined){k=a.parseParam(i[1],"&")}if(a.isString(n)){if(n.substring(0,1)==="?"){n=n.substring(1)}m=a.parseParam(n,"&")}else{if(a.is(n,Object)){m=n}}m.st_page_id=e.pageId;c.sendEssentialInfo(i[0],{},a.combineJson(m,k))}catch(l){a.sendErrorInfo(l,"log")}},asysLog:function(i,j,l){try{if(!j||j==="-"){j=d.location.href}c.sendEssentialInfo(g.logSeverTwo,{p:"{"+g.siteNo+"}",u:"{"+a.trimHttpStr(i)+"}",m:"{GET}",s:"{200}",r:"{"+j+"}",a:"{"+f.get("ali_apache_track")+"}",b:"{-}",c:"{"+a.combineParam(l||{},{},"|")||"-}"},{pageid:a.randomPageId()})}catch(k){a.sendErrorInfo(k,"asysLog")}},flashLog:function(j,k){try{var i=e.win.dmtrack_c;if(!i||i==="{-}"){i="-"}else{i=i.substring(1,i.length-1).replace(/ali_resin_trace=/,"")}if(!k||k==="-"){k=d.location.href}c.sendEssentialInfo(g.logSeverTwo,{p:"{"+g.siteNo+"}",u:"{"+j+"}",m:"{GET}",s:"{200}",r:"{"+k+"}",a:"{"+f.get("ali_apache_track")+"}",b:"{-}",c:"{"+i+"}"},{pageid:a.randomPageId(),dmtrack_type:"xuanwangpu"})}catch(l){a.sendErrorInfo(l,"asysLog")}}}})(MAGNETO);
(function(b){var d=b.globals,c=d.win,e=b.config,a=b.api;c.sk_dmtracking=function(){if(d.isConflicted===true){return}b.moduleManager.require("essential").init()};c.dmtrack={clickstat:function(f,g){a.log(f,g)},tracelog:function(f){a.log(e.tracelogSever,{tracelog:f})},beacon_click:function(f,g,h){a.asysLog(f,g,h)},flash_dmtracking:function(f,g){a.flashLog(f,g)}}})(MAGNETO);
